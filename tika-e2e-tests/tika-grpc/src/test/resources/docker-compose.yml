version: '3.8'

services:
  tika-grpc:
    image: apache/tika-grpc:local
    ports:
      - "50052:50052"
    volumes:
      - ${HOST_GOVDOCS1_DIR}:/tika/govdocs1:ro
      - ./tika-config.json:/config/tika-config.json:ro
    command: ["-c", "/config/tika-config.json"]
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "50052"]
      interval: 10s
      timeout: 5s
      retries: 5
