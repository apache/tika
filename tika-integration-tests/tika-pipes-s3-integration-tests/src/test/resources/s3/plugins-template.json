{
  "fetchers": {
    "s3-fetcher": {
      "s3f": {
        "region": "{REGION}",
        "bucket": "{FETCH_BUCKET}",
        "credentialsProvider": "key_secret",
        "accessKey": "{ACCESS_KEY}",
        "secretKey": "{SECRET_KEY}",
        "endpointConfigurationService": "{ENDPOINT_CONFIGURATION_SERVICE}",
        "pathStyleAccessEnabled": true,
        "maxConnections": 50,
        "throttleSeconds": [30, 120, 600, 1200]
      }
    }
  },
  "emitters": {
    "s3-emitter": {
      "s3e": {
        "region": "{REGION}",
        "bucket": "{EMIT_BUCKET}",
        "credentialsProvider": "key_secret",
        "accessKey": "{ACCESS_KEY}",
        "secretKey": "{SECRET_KEY}",
        "endpointConfigurationService": "{ENDPOINT_CONFIGURATION_SERVICE}",
        "pathStyleAccessEnabled": true,
        "maxConnections": 50,
        "fileExtension": "json",
        "spoolToTemp": true
      }
    }
  },
  "pipes-iterator": {
    "s3-pipes-iterator": {
      "region": "{REGION}",
      "bucket": "{PIPE_ITERATOR_BUCKET}",
      "credentialsProvider": "key_secret",
      "accessKey": "{ACCESS_KEY}",
      "secretKey": "{SECRET_KEY}",
      "endpointConfigurationService": "{ENDPOINT_CONFIGURATION_SERVICE}",
      "pathStyleAccessEnabled": true,
      "baseConfig": {
        "fetcherId": "s3f",
        "emitterId": "s3e",
        "handlerConfig": {
          "type": "TEXT",
          "parseMode": "{PARSE_MODE}",
          "writeLimit": -1,
          "maxEmbeddedResources": -1,
          "throwOnWriteLimitReached": true
        },
        "onParseException": "EMIT",
        "maxWaitMs": 600000,
        "queueSize": 10000
      }
    }
  },
  "pipes": {
    "maxForEmitBatchBytes": 10000,
    "emitMaxEstimatedBytes": 100000,
    "emitWithinMillis": 10,
    "numEmitters": 1,
    "numClients": 1,
    "tikaConfig": "{TIKA_CONFIG}",
    "forkedJvmArgs": [
      "-Xmx1g",
      "-XX:ParallelGCThreads=2",
      "-XX:+ExitOnOutOfMemoryError",
      "-Dlog4j.configurationFile={LOG4J_PROPERTIES_FILE}"
    ],
    "timeoutMillis": 60000
  },
  "plugin-roots": "target/plugins"
}
